services:
  frontend:
    # bind-mount local frontend code into the container so edits appear immediately
    working_dir: /app
    volumes:
      - ./frontend:/app
      - frontend_node_modules:/app/node_modules
    environment:
      # on some Windows setups you may need polling for file watchers
      - CHOKIDAR_USEPOLLING=true
    # ensure the dev server runs (compose.yml already exposes ports and image)
    command: npm run dev

  backend:
    # bind-mount local backend code into the container so edits appear immediately
    working_dir: /code
    volumes:
      - ./backend:/code
    environment:
      - PYTHONUNBUFFERED=1
    # use uvicorn with --reload so code changes restart the server
    command: uvicorn main:app --host 0.0.0.0 --port 80 --reload

volumes:
  frontend_node_modules: {}